{
  "_meta": {
    "launcher_path": "/interlude",
    "project_name": "Interlude"
  },
  "helm-nemo": {
    "description": "NeMo Microservices Helm Chart (with auto-fetch)",
    "versions": ["25.12.0", "25.10.0"],
    "default_version": "25.12.0",
    "working_dir": ".",
    "env_var": "NGC_API_KEY",
    "heading": "Deploy NeMo Microservices",
    "namespace": "nemo",
    "pre_commands": [
      "echo 'üîç Checking Kubernetes cluster connectivity...' && kubectl cluster-info --request-timeout=10s",
      "echo 'üåê Checking ingress controller...' && (kubectl get daemonset -n ingress nginx-ingress-microk8s-controller 2>/dev/null && echo '   ‚úì microk8s ingress enabled') || (command -v microk8s &>/dev/null && echo '   Enabling microk8s ingress...' && microk8s enable ingress) || echo '   (non-microk8s cluster, ensure ingress-nginx is installed)'",
      "echo 'üåã Installing Volcano scheduler...' && kubectl apply -f https://raw.githubusercontent.com/volcano-sh/volcano/master/installer/volcano-development.yaml 2>/dev/null || echo '   (Volcano may already be installed)'",
      "rm -rf nemo-microservices-helm-chart nemo-microservices-helm-chart-*.tgz",
      "helm fetch https://helm.ngc.nvidia.com/nvidia/nemo-microservices/charts/nemo-microservices-helm-chart-${VERSION}.tgz --username='$oauthtoken' --password=\"${NGC_API_KEY}\"",
      "tar -xzf nemo-microservices-helm-chart-${VERSION}.tgz"
    ],
    "command": "helm install nemo-microservices ./nemo-microservices-helm-chart --set ngcAPIKey=\"${NGC_API_KEY}\" --set existingSecret=\"\" --set existingImagePullSecret=\"\" --set tags.auditor=true --set tags.studio=true --set tags.safe-synthesizer=true --create-namespace --namespace nemo",
    "post_commands": [
      "bash nemo-proxy/configure-proxy.sh"
    ],
    "success_check": "kubectl get pods -n nemo --no-headers | grep -v Completed | grep -E 'Running|Pending' | head -1",
    "uninstall_commands": [
      "echo 'üóëÔ∏è Uninstalling NeMo Microservices...'",
      "helm uninstall nemo-microservices --namespace nemo || true",
      "kubectl delete namespace nemo --timeout=60s || true",
      "echo '‚úì Uninstall complete'"
    ],
    "log_sources": [
      {"label": "Pod Status", "command": "kubectl get pods -n nemo -o wide"},
      {"label": "Services", "command": "kubectl get svc -n nemo"}
    ]
  },
  "helm-nemo-local": {
    "description": "NeMo Microservices Helm Chart (local chart)",
    "versions": [],
    "default_version": "",
    "working_dir": ".",
    "env_var": "NGC_API_KEY",
    "namespace": "nemo",
    "pre_commands": [
      "echo 'üîç Checking Kubernetes cluster connectivity...' && kubectl cluster-info --request-timeout=10s",
      "echo 'üåê Checking ingress controller...' && (kubectl get daemonset -n ingress nginx-ingress-microk8s-controller 2>/dev/null && echo '   ‚úì microk8s ingress enabled') || (command -v microk8s &>/dev/null && echo '   Enabling microk8s ingress...' && microk8s enable ingress) || echo '   (non-microk8s cluster, ensure ingress-nginx is installed)'",
      "echo 'üåã Installing Volcano scheduler...' && kubectl apply -f https://raw.githubusercontent.com/volcano-sh/volcano/master/installer/volcano-development.yaml 2>/dev/null || echo '   (Volcano may already be installed)'"
    ],
    "command": "helm install nemo-microservices ./nemo-microservices-helm-chart --set ngcAPIKey=\"${NGC_API_KEY}\" --set existingSecret=\"\" --set existingImagePullSecret=\"\" --set tags.auditor=true --set tags.studio=true --set tags.safe-synthesizer=true --create-namespace --namespace nemo",
    "post_commands": [
      "bash nemo-proxy/configure-proxy.sh"
    ],
    "success_check": "kubectl get pods -n nemo --no-headers | grep -v Completed | grep -E 'Running|Pending' | head -1",
    "uninstall_commands": [
      "echo 'üóëÔ∏è Uninstalling NeMo Microservices...'",
      "helm uninstall nemo-microservices --namespace nemo || true",
      "kubectl delete namespace nemo --timeout=90s || true",
      "echo '‚úì Uninstall complete'"
    ],
    "log_sources": [
      {"label": "Pod Status", "command": "kubectl get pods -n nemo -o wide"},
      {"label": "Services", "command": "kubectl get svc -n nemo"}
    ]
  },
  "docker-compose-nemo": {
    "description": "NeMo Microservices Docker Compose",
    "versions": [],
    "default_version": "",
    "working_dir": "/app",
    "env_var": "NGC_API_KEY",
    "pre_commands": [],
    "command": "cd nemo-microservices-quickstart_25.12 && docker-compose up -d"
  }
}
